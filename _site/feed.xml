<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>r-b-g-b</title>
    <description>it&#39;s nice to be nice</description>
    <link>http://yourdomain.com/</link>
    <atom:link href="http://yourdomain.com/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Tue, 27 Oct 2015 13:52:10 -0700</pubDate>
    <lastBuildDate>Tue, 27 Oct 2015 13:52:10 -0700</lastBuildDate>
    <generator>Jekyll v2.4.0</generator>
    
      <item>
        <title>Mapping diversity in the Bay Area Jupyter notebook</title>
        <description>&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;
&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;p&gt;The first step is getting the raw data that will allow us to do the actual analysis. This will include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Geographic data&lt;/strong&gt; of the areas in which we want to analyze diversity.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Demographic data&lt;/strong&gt; for the same geographical areas&lt;/li&gt;
&lt;/ul&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;
&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h1 id=&quot;Getting-geographic-data&quot;&gt;Getting geographic data&lt;a class=&quot;anchor-link&quot; href=&quot;#Getting-geographic-data&quot;&gt;&amp;#182;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Luckily the US Census Bureau has us covered, providing &quot;shapefiles&quot; for all sorts of things through something called &lt;a href=&quot;https://www.census.gov/cgi-bin/geo/shapefiles/index.php?year=2010&amp;layergroup=Census+Tracts&quot;&gt;TIGER&lt;/a&gt; (rawwwwwr):&lt;/p&gt;
&lt;p&gt;From the drop-down menu for Census Tract (2010) select California, then click the &quot;Download state file&quot; button. Wonderfully, the download doesn&#39;t begin. Checking the javascript console reveals that:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;code&gt;index.php?year=2010&amp;amp;layergroup=Census+Tracts:1 Mixed Content: The page at &#39;https://www.census.gov/cgi-bin/geo/shapefiles/index.php?year=2010&amp;amp;layergroup=Census+Tracts&#39; was loaded over HTTPS, but requested an insecure resource &#39;http://www2.census.gov/geo/tiger/TIGER2010/TRACT/2010/tl_2010_06001_tract10.zip&#39;. This request has been blocked; the content must be served over HTTPS.&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;So just reload the page changing &lt;code&gt;https:&lt;/code&gt; to &lt;code&gt;http:&lt;/code&gt; and get yourself some geodata!&lt;/p&gt;
&lt;p&gt;The file is named &lt;code&gt;tl_2010_06_tract10.zip&lt;/code&gt;, &lt;code&gt;2010&lt;/code&gt; referring to the census year, &lt;code&gt;06&lt;/code&gt; is the state code for California. Shapefiles are proprietary (boo) and old, so we convert them to the cooler geoJSON format using a command-line tool called &lt;code&gt;ogr2ogr&lt;/code&gt;.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[&amp;nbsp;]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;ogr2ogr -f GeoJSON -t_srs crs:84 ca-tract.geojson ../geodata/ca-tract-shapefiles/tl_2010_06_tract10.shp
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;
&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;p&gt;Now the file is good plain &lt;code&gt;json&lt;/code&gt; with special fields that make it &quot;GEO.&quot; So we load it with the &lt;code&gt;json&lt;/code&gt; python module&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[1]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;json&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[&amp;nbsp;]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;ca-tract.geojson&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;geodata&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;
&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;p&gt;This file contains the entire state of California, but for now I just want to look at the &quot;Bay Area&quot; counties. The census uses something called FIPS codes to refer to those, which I got from wikipedia:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Alameda_county&quot;&gt;Alameda County (1)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;SF County (75)&lt;/li&gt;
&lt;li&gt;Marin County (41)&lt;/li&gt;
&lt;li&gt;Contra Costa County (13)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I&#39;ll use these codes to filter out the geodata for just those counties and save it to another, smaller geoJSON file.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[2]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;county_codes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;41&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;75&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;county_codes_str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%3.3i&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;county_codes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[&amp;nbsp;]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;geodata_bayarea&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;crs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geodata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;crs&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geodata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;type&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;geodata_bayarea&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;features&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;geodata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;features&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;properties&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;COUNTYFP10&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;county_codes_str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;bayarea-tract.geojson&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dump&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geodata_bayarea&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[3]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;bayarea-tract.geojson&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;geodata_bayarea&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;
&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h1 id=&quot;Getting-demographic-data&quot;&gt;Getting demographic data&lt;a class=&quot;anchor-link&quot; href=&quot;#Getting-demographic-data&quot;&gt;&amp;#182;&lt;/a&gt;&lt;/h1&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;
&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;p&gt;The US Census Bureau operates an API for finding census data at &lt;a href=&quot;http://factfinder.census.gov/&quot;&gt;http://factfinder.census.gov/&lt;/a&gt;
I found the census data through the &quot;&lt;a href=&quot;http://factfinder.census.gov/faces/nav/jsf/pages/download_center.xhtml&quot;&gt;Download Center&lt;/a&gt;&quot;&lt;/p&gt;
&lt;p&gt;There are a couple of steps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Select the radio button &lt;strong&gt;I know the dataset or table(s) that I want to download&lt;/strong&gt;, then &lt;strong&gt;Next&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Select &lt;strong&gt;Decennial Census&lt;/strong&gt; from the dropdown menu&lt;/li&gt;
&lt;li&gt;Select &lt;strong&gt;2010 SF 100% Data&lt;/strong&gt;, then &lt;strong&gt;Add to your selections&lt;/strong&gt;, then &lt;strong&gt;Next&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Select &lt;strong&gt;State ... Place ... County (or part) ... Census Tract (or part)&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The table named &lt;strong&gt;Race and Hispanic or Latino Origin: 2010&lt;/strong&gt; contains counts for all races. Select that, download it and you&#39;re off!&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[4]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pandas&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pd&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;np&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;matplotlib&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pyplot&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;seaborn&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sns&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;matplotlib&lt;/span&gt; inline
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[5]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read_csv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;../censusdata/DEC_10_SF1_QTP3_with_ann.csv&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[6]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;column_description&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[7]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;column_mapper&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;GEO.id&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;geoid&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;s&quot;&gt;&amp;#39;HD01_S01&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;total&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;s&quot;&gt;&amp;#39;HD01_S02&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;one_race&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;s&quot;&gt;&amp;#39;HD01_S03&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;numWhite&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;s&quot;&gt;&amp;#39;HD01_S04&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;numBlack&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;s&quot;&gt;&amp;#39;HD01_S05&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;numAI&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;s&quot;&gt;&amp;#39;HD01_S10&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;numAsian&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;s&quot;&gt;&amp;#39;HD01_S23&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;num1Other&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;s&quot;&gt;&amp;#39;HD01_S24&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;num2Other&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;s&quot;&gt;&amp;#39;HD01_S30&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;numHisp&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;column_mapper&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;columns&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;column_mapper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inplace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;
&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;p&gt;We need to do a little parsing of the geo id to get the county code and tract numbers. The &lt;code&gt;extract&lt;/code&gt; method appears to do what we want, extracting substrings based on regular expression matches.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[8]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;county&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geoid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extract&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;US06(\d\d\d)&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;county&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;county_codes_str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;tract&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geoid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extract&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;US\d\d\d\d\d(\d\d\d\d)&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;geoid&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inplace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;output_wrapper&quot;&gt;
&lt;div class=&quot;output&quot;&gt;


&lt;div class=&quot;output_area&quot;&gt;&lt;div class=&quot;prompt output_prompt&quot;&gt;Out[8]:&lt;/div&gt;

&lt;div class=&quot;output_html rendered_html output_subarea output_execute_result&quot;&gt;
&lt;div&gt;
&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;
  &lt;thead&gt;
    &lt;tr style=&quot;text-align: right;&quot;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;numAsian&lt;/th&gt;
      &lt;th&gt;numHisp&lt;/th&gt;
      &lt;th&gt;num2Other&lt;/th&gt;
      &lt;th&gt;numWhite&lt;/th&gt;
      &lt;th&gt;one_race&lt;/th&gt;
      &lt;th&gt;total&lt;/th&gt;
      &lt;th&gt;num1Other&lt;/th&gt;
      &lt;th&gt;numAI&lt;/th&gt;
      &lt;th&gt;numBlack&lt;/th&gt;
      &lt;th&gt;county&lt;/th&gt;
      &lt;th&gt;tract&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;geoid&lt;/th&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;1400000US06001400100&lt;/th&gt;
      &lt;td&gt;456&lt;/td&gt;
      &lt;td&gt;117&lt;/td&gt;
      &lt;td&gt;116&lt;/td&gt;
      &lt;td&gt;2161&lt;/td&gt;
      &lt;td&gt;2821&lt;/td&gt;
      &lt;td&gt;2937&lt;/td&gt;
      &lt;td&gt;49&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;142&lt;/td&gt;
      &lt;td&gt;001&lt;/td&gt;
      &lt;td&gt;4001&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1400000US06001400200&lt;/th&gt;
      &lt;td&gt;147&lt;/td&gt;
      &lt;td&gt;151&lt;/td&gt;
      &lt;td&gt;115&lt;/td&gt;
      &lt;td&gt;1659&lt;/td&gt;
      &lt;td&gt;1859&lt;/td&gt;
      &lt;td&gt;1974&lt;/td&gt;
      &lt;td&gt;16&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;33&lt;/td&gt;
      &lt;td&gt;001&lt;/td&gt;
      &lt;td&gt;4002&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1400000US06001400300&lt;/th&gt;
      &lt;td&gt;423&lt;/td&gt;
      &lt;td&gt;399&lt;/td&gt;
      &lt;td&gt;319&lt;/td&gt;
      &lt;td&gt;3468&lt;/td&gt;
      &lt;td&gt;4546&lt;/td&gt;
      &lt;td&gt;4865&lt;/td&gt;
      &lt;td&gt;115&lt;/td&gt;
      &lt;td&gt;17&lt;/td&gt;
      &lt;td&gt;518&lt;/td&gt;
      &lt;td&gt;001&lt;/td&gt;
      &lt;td&gt;4003&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1400000US06001400400&lt;/th&gt;
      &lt;td&gt;278&lt;/td&gt;
      &lt;td&gt;332&lt;/td&gt;
      &lt;td&gt;230&lt;/td&gt;
      &lt;td&gt;2628&lt;/td&gt;
      &lt;td&gt;3473&lt;/td&gt;
      &lt;td&gt;3703&lt;/td&gt;
      &lt;td&gt;91&lt;/td&gt;
      &lt;td&gt;14&lt;/td&gt;
      &lt;td&gt;456&lt;/td&gt;
      &lt;td&gt;001&lt;/td&gt;
      &lt;td&gt;4004&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[9]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;astype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;
&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;p&gt;A few of the entries contain a suffix (r39...). I don&#39;t know exactly what that means, but my hunch is that it&#39;s tagging data that was revised for some reason or another. In any case, it messes with the conversion from string to integer, so it&#39;s gotta go.&lt;/p&gt;
&lt;p&gt;Again &lt;code&gt;Series.extract&lt;/code&gt; is our string parsing friend.&lt;/p&gt;
&lt;p&gt;Here, I convert everything to &lt;code&gt;int&lt;/code&gt;, printing the changes to make sure nothing wonky happens.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[10]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;col&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;demdata_col&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;col&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;demdata_col_extract&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;demdata_col&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extract&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;(\d+)&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;col&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;demdata_col_extract&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;astype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[11]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;demdata_counts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;^num&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[12]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;fig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subplots&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;demdata_counts&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sort_values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ascending&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;Overall distribution of races in California&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;output_wrapper&quot;&gt;
&lt;div class=&quot;output&quot;&gt;


&lt;div class=&quot;output_area&quot;&gt;&lt;div class=&quot;prompt&quot;&gt;&lt;/div&gt;


&lt;div class=&quot;output_png output_subarea &quot;&gt;
&lt;img src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYoAAAEzCAYAAAAvu0StAAAABHNCSVQICAgIfAhkiAAAAAlwSFlz
AAALEgAACxIB0t1+/AAAIABJREFUeJzt3XmYXFW57/FvkxAgZBAkOShGFA7nBT0goBgmw2AEAS84
3KvAuTKoTHJAvU5HHBiEGxVUBhkEQYIBjgcFh4skKB4gRoYoKCL6ExAwikogISQmEkL6/rFWJUXb
vbqqO927dvL7PE+eVO3atfa7d+/ab61hr+rq7u7GzMysL+tVHYCZmXU2JwozMytyojAzsyInCjMz
K3KiMDOzIicKMzMrGll1ALZmRcTxwPHA+kA3cA/wSUnzhmHbpwEvlnRSRDwKvF3SPf28ZwnwKmAi
8HFJ/6uw7i7AeySd0Mtrr2u8PyKuBH4j6fNtxn8zcKikBRFxI/BhSb9tp4x2RcRRwOnAA5IOGMpt
tSsijgNeNIDjuDvwaWBz0jXmMdLf5tf9vO9K4FeSvhgR9wJ7AUuAG4BtgfMkXdT2jvzjdi4DrpX0
48GWta5woliLRMQ5wPbAQZL+FBFdwP8G7oiIyZL+NMQhdOd/NP3fynuQ9DOgzySRvRp4WW8v9Hj/
QG8Omgp05fIOGmAZ7ToC+ISka4Zpey2T9NV23xMRU4BvAG+VdG9edjhwW0SEpKcKb191/kjaKb/3
5cB+wGhJa+SmL0nHrIly1iVOFGuJiHgZcBzwMkmLAPIH6xsR8VrgExHxXeCLknbI73kR8HvglcAY
4ALg5aTayH9KmhYRrwBmAw8AryB9y3sPcAiwIbAx8BFJ3yFfZPuJ8w15OyuBn5ObPyNib+ACSdtH
xJ7AF4ERpAvHNOBu4AxgXERcDlwFnE/6xrkx8LG8b9vnOHaLiDuAccDNOcbnI2IlsJmkBXm7K4EJ
wDk5xB9HxEHAT8g1oog4FjgJeB74K/Dvkh7M34AXkZLzJOC3pBrJ33rs83jgQuA1eX9uAk7J29wF
eEVETJR0btN79gbOy/s3GpgMnJ3/H5v38X2SfhoRjb/d7sAK4DuSPhkRo4DPA1PysbwXOFnS4og4
gXS+LAf+Dhwn6Tc94j6NF9YQvw68kXSOfFPSx//hD5xqR2c0kgSApGsiYhkwMn95Obe3/eix7ZV5
OzNJ5+M9EfEOYAvgC/mYLAc+JWlWrpm9Ny9fBEwH3k76m22T1z1C0q8j4lbSufbtiDiF3s9la+I+
irXHZFJzy6JeXrsF2FPSD4ExOXEAHAb8v/yebwBXSHpdLutNEdH4hr4F6cMfwAbAvsAUSa8BPkW6
gPcrX7iuAz4kaWdgFrBRL6ueDnwpx/IeYB9JfyQ1Z8yW9F7SBebVpAvzjqQLQbOX5jh3JF2gS98i
uyUdnR83ttWdY94X+Ciwd97ONUDzhWRnYH9gu7zN3mpF5wPzcxJ7XY7nI5I+BPwsPz63l/c19m+n
vJ3NJe0q6dWkRPkfeb0zgFGk5pkdgT0iYq/8+nOSXptj/zPwuYhYD/gysL+k1wOXAnv0dlx4YQ1x
Y0lTSAnppIjYspf3vBaY03OhpBsk/ZV0bvW1Hz0tBQ4AluVjsIh0/pycz70jgRn5ywykJsy9JO1L
Oj+mkJL69jmmjzbvV66tvJEBnMvrGieKtcv6fSzfgNUf+MuBo/Ljo4GvRcTGpJrCZ3Pb8B2kJp7X
5PVW5GVIeiy//90RMY30rXTjFuPbHlgu6b9zWd8CFvay3jeBCyNiBunC88m8vGeNZV4ffS/dwDck
LZP0HDADeFOLMTbrAt5Mql09lWOeDmyRL07dwExJz0laAfwK2LSXct4MfCW/fzlwCekC2Lyd3qza
P0l3Ap+OiBMi4mzgHaw+7m8ELpfUnWPZW9JtwFuAQyLi3vx3PQTYTtJK0gX3joi4gHQBvqKF4/Hd
HMvjwBN97OtKCteVfvajN83HZjLwkKS5uawHSAlgb9Lf4j5JS5rW/3mOFVJf3QvilfQHUrIZyLm8
TnGiWHvcCWwTEf/Uy2v7sPpb3pXAOyPiNcB4SbeTmiUAdpO0U/72tjupyQfg2XxxISJ2JiWNMaQa
wedp/Tzq5h8viit6riTpUlJS+SHp2/p9ETGul/KW9LKsYWXT4/V4YY2jC1bVcPrT1UvMXaxOyn9v
Wt7b/jW237x8BC9s9u2r7X3V/uXmsBtJ+/UdUrJpHPcXHMOI2CIiXpxfP7npbzoZeCeApHeTEslD
wMeB6/uIodmyHjH3tq93Arv1XBgRF0bEG/vZj/70tl7zsex5Pizr8fwF8Q7yXF6n+KCsJXJH9fnA
tRHx0sbyiDgaeBvpQ9BY7y7gq8BledkzpA/4h/N7xpP6JQ7uZVNvAObmppLZuewRTa+X+il+BXRF
xAF5OweS+gdeICJ+CuyUv70fB7wo/3uOvmtNzbqAQyNiVERsSPrWeFN+bT6pXwBSG3az50lNOA3d
pAvIuyJisxzb0cCTpAtsv30y2SzgxPz+DYBjSUmwHVOB7+cO5p/zwuP+I+DIiOjK5X+b1Owyi9RE
NCo3N10CnBURL46IPwALJJ1HatLboZdt9pYk+3MmcGq+CAOrjtnbSX//0n70t607U3GxSy731aTz
8dYBxNlF/+eyZU4UaxFJp5CaWb4bEb+KiN+R2ul369FEcxmpLXt607LDgV0j4j5SIrlW0rX5teZv
vNcCm0XE/cCPgV8AL8odqt0URhzlZqC3srqJ63+SOocbGu/9KHBGRNyTt3Fabia4A9g2Ir7dx7aa
29N/T+qQvge4TdJV+bWTSc1aP8/H4PGm918PzM4XoEbMPyK15/847/O7gbfkgQKlGJqdDEyMiF8B
9wG/Ac7qZb2emsu6BNgrH7cfkBLNK/Jrp5NqTL/M+3ujpBuAzwKPkjqxf036vH84N6OdCdwSET8j
1Rzf18f22xppJOknuazzcpPXr0l/830kPdHXfuRO7uZt/cNjSU+S+oAuyOfp1cBRkh7qJdZWnvd1
Lrv5qYcuTzNuZmYlxeGxEbE+qZNrS1KH6Jmkb0NXktoY7wdOlNQdEceQqtQrgDMl3RgRG5G+4U4A
FgNHSnoyInYlDZFbAdws6Yy8vVOBA/PyD0qam6v815CGrz0OHC2pZ9ujmZkNkf6anv6NNKxvCmnk
xoWk8e2n5GVdpFEVm5PGme9O6nycljsKTwB+mde9ijT8DFL18zBJewKTI2LH3KY5RdJk4NC8LYDP
ADNyGfeS2qzNzGyY9JcoriNdqBvrPgfsnEfKQOognErqHJyTh+Y9Q+ro24E0NntmXncmMDUixgKj
JD2Sl8/KZexBujGK3J4+MtcmmstobM/MzIZJMVFI+pukJfnifh2pRtD8nsXAeNLdr4v6WP5MYVmr
ZTSWL8nLzMxsmPQ7hUdETCKNBrlQ0rUR8YWml8cBT5Mu/GOblo/tZXlvy5rLWF4oYxxpWGNjWdGK
Fc93jxzpUW5mZm3oc4hxf53Z/0RqDnp/425a4N6I2Cvf+XkAaXqIu0njszcgdTpvR+ronkPqnJ6b
1709zzOzPCK2Ah4hTfh1GmkM+xciTWw3CeiS9FRENMqY3iijv71duHBpf6sMyoQJY5k/f/GQbmOo
1Dl2cPxVc/zVGsr4J0wY2+dr/dUoTiE19XwmIhp9FR8Azs+d1Q8A38qjns4n3bSyHqmz+9mIuBiY
HhGzgWdJY/UhTYN9NenmllmNW/LzenfkMk7M656ZyziGVKtolGFmZsNgrbyPYv78xUO6U3X+VlLn
2MHxV83xV2uIaxR9Nj35zmwzMytyojAzsyInCjMzK3KiMDOzIicKMzMrcqIwM7MiJwozMytyojAz
syInCjMzK3KiMDOzIicKMzMr6nea8bXd8uXLmTfvsbbes3DhGBYsWNLy+pMmbcmoUaPaDc3MrCOs
84li3rzH+MDZ32P0+IlDUv7SRU9w3kcPZuuttxmS8s3Mhto6nygARo+fyJhNtqg6DDOzjuQ+CjMz
K3KiMDOzIicKMzMrcqIwM7MiJwozMytyojAzsyInCjMzK3KiMDOzIicKMzMrcqIwM7MiJwozMyty
ojAzsyInCjMzK3KiMDOzIicKMzMrcqIwM7MiJwozMytyojAzsyInCjMzK3KiMDOzIicKMzMrcqIw
M7MiJwozMytyojAzsyInCjMzK3KiMDOzIicKMzMrcqIwM7MiJwozMytyojAzsyInCjMzK3KiMDOz
IicKMzMrcqIwM7Oika2sFBGTgc9J2icidgK+DzyYX75I0nURcQxwLLACOFPSjRGxETADmAAsBo6U
9GRE7Aqcm9e9WdIZeTunAgfm5R+UNDciNgOuATYEHgeOlrRsjey9mZn1q98aRUR8DLgM2CAvei3w
JUn75H/XRcTmwEnA7sD+wLSIGAWcAPxS0hTgKuBTuYxLgMMk7QlMjogdI2JnYIqkycChwIV53c8A
M3IZ9wLHDX63zcysVa00PT0EvB3oys9fCxwUEbdFxNciYgzwemCOpOckPZPfswOwBzAzv28mMDUi
xgKjJD2Sl88CpuZ1bwaQNA8YmWsTzWXclNc1M7Nh0m+ikHQ9qSmo4S7gI5L2An4PnAqMBRY1rbMY
GA+MA54pLOu5vK8yGsuX5GVmZjZMWuqj6OEGSY0L9w3ABcDtpGTRMBZ4mpQQxhaWQUoETwPLC2WM
A+Y3LSvaZJPRjBw5oqWdWbhwTEvrDcamm45hwoSx/a84TDoploFw/NVy/NWqIv6BJIqZEXGypLmk
ZqCfAXcDZ0XEBqRO5+2A+4E5pM7pucABwO2SFkfE8ojYCngE2A84DXge+EJEnANMArokPRURjTKm
N8roL8CFC5e2vDMLFixped2BWrBgCfPnLx7y7bRiwoSxHRPLQDj+ajn+ag1l/KUE1E6i6M7/Hw9c
GBHPAX8GjpW0JCLOB2aTmrNOkfRsRFwMTI+I2cCzwOFNZVwNjABm5aRDXu+OXMaJed0zcxnHkGoV
jTLMzGwYdHV3d/e/Vs3Mn7+45Z16+OEH+cSldzJmky2GJJYlC//EtGN3ZeuttxmS8tvlb1TVcvzV
cvzFsrv6es033JmZWZEThZmZFTlRmJlZkROFmZkVOVGYmVmRE4WZmRU5UZiZWZEThZmZFTlRmJlZ
kROFmZkVOVGYmVmRE4WZmRU5UZiZWZEThZmZFTlRmJlZkROFmZkVOVGYmVmRE4WZmRU5UZiZWZET
hZmZFTlRmJlZkROFmZkVOVGYmVmRE4WZmRU5UZiZWZEThZmZFTlRmJlZkROFmZkVOVGYmVmRE4WZ
mRU5UZiZWZEThZmZFTlRmJlZkROFmZkVOVGYmVmRE4WZmRU5UZiZWZEThZmZFTlRmJlZkROFmZkV
OVGYmVmRE4WZmRU5UZiZWZEThZmZFTlRmJlZkROFmZkVOVGYmVnRyFZWiojJwOck7RMR/wxcCawE
7gdOlNQdEccAxwIrgDMl3RgRGwEzgAnAYuBISU9GxK7AuXndmyWdkbdzKnBgXv5BSXMjYjPgGmBD
4HHgaEnL1tD+m5lZP/qtUUTEx4DLgA3yoi8Bp0iaAnQBh0TE5sBJwO7A/sC0iBgFnAD8Mq97FfCp
XMYlwGGS9gQmR8SOEbEzMEXSZOBQ4MK87meAGbmMe4HjBrvTZmbWulaanh4C3k5KCgA7S7o9P74J
mArsAsyR9JykZ/J7dgD2AGbmdWcCUyNiLDBK0iN5+axcxh7AzQCS5gEjc22iuYzG9szMbJj0mygk
XU9qCmroanq8GBgPjAMW9bH8mcKyVstoLF+Sl5mZ2TBpqY+ih5VNj8cBT5Mu/GOblo/tZXlvy5rL
WF4oYxwwv2lZ0SabjGbkyBEt7czChWNaWm8wNt10DBMmjO1/xWHSSbEMhOOvluOvVhXxDyRR3BsR
e0m6DTgAuAW4GzgrIjYgdTpvR+ronkPqnJ6b171d0uKIWB4RWwGPAPsBpwHPA1+IiHOASUCXpKci
olHG9EYZ/QW4cOHSlndmwYIlLa87UAsWLGH+/MVDvp1WTJgwtmNiGQjHXy3HX62hjL+UgNpJFN35
/w8Dl+XO6geAb+VRT+cDs0nNWadIejYiLgamR8Rs4Fng8FzG8cDVwAhglqS5AHm9O3IZJ+Z1z8xl
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
YII=
&quot;
&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;
&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h1 id=&quot;Compute-diversity-index&quot;&gt;Compute diversity index&lt;a class=&quot;anchor-link&quot; href=&quot;#Compute-diversity-index&quot;&gt;&amp;#182;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Now we need some way to turn all these census counts into some value that expresses diversity. I read about a method used by &lt;a href=&quot;http://diversity.missouristate.edu/DiversityIndex.htm&quot;&gt;Missouri state&lt;/a&gt; that seemed to make intuitive sense. It&#39;s the probability that two randomly chosen people in the census tract will be of different races and comes directly from some very basic laws of probability. Start with a formula for &quot;Homogeneity,&quot; the probability of drawing two people of the same race. Since draws are independent, that probability is
$$P(\text{race1})*P(\text{race1})=P(\text{race1})^2$$&lt;/p&gt;
&lt;p&gt;Then the probability of drawing two people of the same race is the sum of the squared probabilities for each of the races.&lt;/p&gt;
$$\text{Homogeneity}=P(\text{Asian})^2+P(\text{Black})^2+P(\text{Hispanic})^2+P(\text{White})^2+P(\text{Other})^2$$$$\text{Diversity}=1-\text{Homogeneity}$$
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[13]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;calculate_diversity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;total&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;col_names&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;columns&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DataFrame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;col_name&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;col_names&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;col_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;num&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;p&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;col_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;total&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;diversity&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;diversity&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[14]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;diversity&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;calculate_diversity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;demdata_counts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;
&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;h1 id=&quot;Combining-geographic-and-demographic-data&quot;&gt;Combining geographic and demographic data&lt;a class=&quot;anchor-link&quot; href=&quot;#Combining-geographic-and-demographic-data&quot;&gt;&amp;#182;&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;Now we make ourselves a &lt;em&gt;choropleth&lt;/em&gt;, which is the fancy cartographer&#39;s word for colory map. We&#39;ll use the fantastic python module &lt;a href=&quot;https://github.com/python-visualization/folium&quot;&gt;folium&lt;/a&gt;, which makes beautiful d3 maps without me having to type a line of javascript.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[15]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;folium&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing text_cell rendered&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;
&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
&lt;div class=&quot;text_cell_render border-box-sizing rendered_html&quot;&gt;
&lt;p&gt;While the choropleth is a great way to show a lot of spatial data, I&#39;d also like to have additional data available if the user wants it. &quot;Additional data&quot; in this case will be the specific population counts per each racial category for each tract. I couldn&#39;t find a way to make the census tract polygon&#39;s clickable, so I&#39;ll settle for putting a little dot in the middle. If the user wants to see the breakdown underlying the diversity score for a tract, they click on the marker and a tool-tip style window pops up.&lt;/p&gt;
&lt;p&gt;Here&#39;s the code to calculate the polygon centroid given a tract polygon.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[25]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;area_for_polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;imax&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2.&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;centroid_for_polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;area&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;area_for_polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;imax&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;result_x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;result_y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;result_x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;result_y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;result_x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;result_y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;result_x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;area&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;6.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;result_y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;area&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;6.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result_x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result_y&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[17]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;centroids&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;geoids&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;geodata_bayarea&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;features&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;geometry&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;type&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;Polygon&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;lon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;centroid_for_polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;geometry&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;coordinates&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;centroids&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;geoids&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;properties&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;GEOID10&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[18]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;lat_centroids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lon_centroids&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;centroids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[19]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;centroid_df&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DataFrame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;geoid10&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geoids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;lat_centroid&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lat_centroids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;lon_centroid&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lon_centroids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;centroid_df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;geoid10&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inplace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[20]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;geoid10&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extract&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;US(\d\d\d\d\d\d\d\d\d\d\d)&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;set_index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;geoid10&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inplace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;centroid_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reset_index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inplace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[23]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;IPython.display&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HTML&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;inline_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;650&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;sd&quot;&gt;&amp;quot;&amp;quot;&amp;quot;Takes a folium instance and embed HTML.&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_build_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;srcdoc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HTML&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;&amp;amp;quot;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;embed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HTML&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;&amp;lt;iframe srcdoc=&amp;quot;{}&amp;quot; &amp;#39;&lt;/span&gt;
                 &lt;span class=&quot;s&quot;&gt;&amp;#39;style=&amp;quot;width: {}px; height: {}px; &amp;#39;&lt;/span&gt;
                 &lt;span class=&quot;s&quot;&gt;&amp;#39;border: none&amp;quot;&amp;gt;&amp;lt;/iframe&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;srcdoc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;embed&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[33]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt;&lt;span class=&quot;n&quot;&gt;label_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;numAsian&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;Asian&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;numBlack&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;Black&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;numHisp&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;Hispanic&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;numWhite&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;White&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;threshold_scale&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;diversity&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;quantile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tolist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;folium&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;37.864364&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;122.211114&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zoom_start&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
               &lt;span class=&quot;n&quot;&gt;tiles&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;Stamen Toner&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
               &lt;span class=&quot;n&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;Map tiles by Stamen Design (stamen.com)&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geo_json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geo_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;r&amp;#39;bayarea-tract.geojson&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;demdata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;geoid10&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;diversity&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]],&lt;/span&gt; 
           &lt;span class=&quot;n&quot;&gt;columns&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;geoid10&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;diversity&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
           &lt;span class=&quot;n&quot;&gt;key_on&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;feature.properties.GEOID10&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
           &lt;span class=&quot;n&quot;&gt;fill_color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;YlGnBu&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
           &lt;span class=&quot;n&quot;&gt;fill_opacity&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
           &lt;span class=&quot;n&quot;&gt;threshold_scale&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;threshold_scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;bayarea-diversity-choropleth.html&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;inline_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;output_wrapper&quot;&gt;
&lt;div class=&quot;output&quot;&gt;


&lt;div class=&quot;output_area&quot;&gt;&lt;div class=&quot;prompt output_prompt&quot;&gt;Out[33]:&lt;/div&gt;

&lt;div class=&quot;output_html rendered_html output_subarea output_execute_result&quot;&gt;
&lt;iframe srcdoc=&quot;&lt;!DOCTYPE html&gt;
&lt;head&gt;
   &lt;meta http-equiv=&amp;quot;content-type&amp;quot; content=&amp;quot;text/html; charset=UTF-8&amp;quot; /&gt;
   &lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css&amp;quot; /&gt;
   &lt;script src=&amp;quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js&amp;quot;&gt;&lt;/script&gt;
   &lt;script src=&amp;quot;https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js&amp;quot; charset=&amp;quot;utf-8&amp;quot;&gt;&lt;/script&gt;
   &lt;script src=&amp;quot;https://cdnjs.cloudflare.com/ajax/libs/queue-async/1.0.7/queue.min.js&amp;quot;&gt;&lt;/script&gt;

   
   
   
   

   &lt;style&gt;

      html, body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
      }

      .legend {
          padding: 0px 0px;
          font: 10px sans-serif;
          background: white;
          background: rgba(255,255,255,0.8);
          box-shadow: 0 0 15px rgba(0,0,0,0.2);
          border-radius: 5px;
      }

      .key path {
        display: none;
      }

   &lt;/style&gt;
&lt;/head&gt;

&lt;body&gt;

   &lt;div id=&amp;quot;map&amp;quot; style=&amp;quot;width: 100%; height: 100%&amp;quot;&gt;&lt;/div&gt;

   &lt;script&gt;

      queue()
          .defer(d3.json, &#39;data.json&#39;)
          .defer(d3.json, &#39;bayarea-tract.geojson&#39;)
          .await(makeMap)

      function onEachFeature(feature, layer) {
          // does this feature have a property named popupContent?
          if (feature.properties &amp;&amp; feature.properties.popupContent) {
              layer.bindPopup(feature.properties.popupContent);
              }
          };

      function makeMap(error, data_1,gjson_1) {

          

          

          function matchKey(datapoint, key_variable){
              if (typeof key_variable[0][datapoint] === &#39;undefined&#39;) {
                  return null;
              }
              else {
                  return parseFloat(key_variable[0][datapoint]);
              };
          };

          
          var color = d3.scale.threshold()
              .domain([16.386576486570004, 49.68348824161616, 61.83300758407192, 70.38044239863444, 75.41363416167346])
              .range([&#39;#FFFFCC&#39;, &#39;#C7E9B4&#39;, &#39;#7FCDBB&#39;, &#39;#41B6C4&#39;, &#39;#1D91C0&#39;, &#39;#225EA8&#39;]);
          

          var map = L.map(&#39;map&#39;).setView([37.864364, -122.211114], 9);

          L.tileLayer(&#39;https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png&#39;, {
              maxZoom: 18,
              minZoom: 1,
              attribution: &#39;Map tiles by &lt;a href=&amp;quot;http://stamen.com&amp;quot;&gt;Stamen Design&lt;/a&gt;, under &lt;a href=&amp;quot;http://creativecommons.org/licenses/by/3.0&amp;quot;&gt;CC BY 3.0&lt;/a&gt;. Data by &lt;a href=&amp;quot;http://openstreetmap.org&amp;quot;&gt;OpenStreetMap&lt;/a&gt;, under &lt;a href=&amp;quot;http://www.openstreetmap.org/copyright&amp;quot;&gt;ODbL&lt;/a&gt;.&#39;
          }).addTo(map);

          
          function style_1(feature) {
    return {
        fillColor: color(matchKey(feature.properties.GEOID10, data_1)),
        weight: 1,
        opacity: 1,
        color: &#39;black&#39;,
        fillOpacity: 0.9
    };
}
          

          
          gJson_layer_1 = L.geoJson(gjson_1, {style: style_1,onEachFeature: onEachFeature}).addTo(map)
          

          
              var legend = L.control({position: &#39;topright&#39;});

    legend.onAdd = function (map) {var div = L.DomUtil.create(&#39;div&#39;, &#39;legend&#39;); return div};

    legend.addTo(map);

    var x = d3.scale.linear()
    .domain([0, 82])
    .range([0, 400]);

    var xAxis = d3.svg.axis()
        .scale(x)
        .orient(&amp;quot;top&amp;quot;)
        .tickSize(1)
        .tickValues([16.386576486570004, 49.68348824161616, 61.83300758407192, 70.38044239863444, 75.41363416167346]);

    var svg = d3.select(&amp;quot;.legend.leaflet-control&amp;quot;).append(&amp;quot;svg&amp;quot;)
        .attr(&amp;quot;id&amp;quot;, &#39;legend&#39;)
        .attr(&amp;quot;width&amp;quot;, 450)
        .attr(&amp;quot;height&amp;quot;, 40);

    var g = svg.append(&amp;quot;g&amp;quot;)
        .attr(&amp;quot;class&amp;quot;, &amp;quot;key&amp;quot;)
        .attr(&amp;quot;transform&amp;quot;, &amp;quot;translate(25,16)&amp;quot;);

    g.selectAll(&amp;quot;rect&amp;quot;)
        .data(color.range().map(function(d, i) {
          return {
            x0: i ? x(color.domain()[i - 1]) : x.range()[0],
            x1: i &lt; color.domain().length ? x(color.domain()[i]) : x.range()[1],
            z: d
          };
        }))
      .enter().append(&amp;quot;rect&amp;quot;)
        .attr(&amp;quot;height&amp;quot;, 10)
        .attr(&amp;quot;x&amp;quot;, function(d) { return d.x0; })
        .attr(&amp;quot;width&amp;quot;, function(d) { return d.x1 - d.x0; })
        .style(&amp;quot;fill&amp;quot;, function(d) { return d.z; });

    g.call(xAxis).append(&amp;quot;text&amp;quot;)
        .attr(&amp;quot;class&amp;quot;, &amp;quot;caption&amp;quot;)
        .attr(&amp;quot;y&amp;quot;, 21)
        .text(&#39;diversity&#39;);
          

          

          

          

          

          

          

      };

   &lt;/script&gt;
&lt;/body&gt;&quot; style=&quot;width: 650px; height: 500px; border: none&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;cell border-box-sizing code_cell rendered&quot;&gt;
&lt;div class=&quot;input&quot;&gt;
&lt;div class=&quot;prompt input_prompt&quot;&gt;In&amp;nbsp;[&amp;nbsp;]:&lt;/div&gt;
&lt;div class=&quot;inner_cell&quot;&gt;
    &lt;div class=&quot;input_area&quot;&gt;
&lt;div class=&quot; highlight hl-ipython2&quot;&gt;&lt;pre&gt; 
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;</description>
        <pubDate>Mon, 26 Oct 2015 18:30:29 -0700</pubDate>
        <link>http://yourdomain.com/projects/data/geospatial/notebook/2015/10/26/bayarea-diversity-notebook.html</link>
        <guid isPermaLink="true">http://yourdomain.com/projects/data/geospatial/notebook/2015/10/26/bayarea-diversity-notebook.html</guid>
        
        
        <category>projects</category>
        
        <category>data</category>
        
        <category>geospatial</category>
        
        <category>notebook</category>
        
      </item>
    
      <item>
        <title>How do monkeys look?</title>
        <description>&lt;p&gt;Mmmm, kind of hairy, long tails, cute little bald faces? No, what I mean is how do they look &lt;em&gt;at things&lt;/em&gt;, specifically, how do they look at other monkeys. As an undergraduate at the University of Arizona, I had the extreme fortune of working under &lt;a href=&quot;http://neurology.arizona.edu/katalin-gothard-md-phd&quot;&gt;Dr. Katalin Gothard&lt;/a&gt;, who studies social and emotional processing in the amygdala using primate models. In order to understand social cognition in primates, the &lt;a href=&quot;http://gothard.wix.com/gothard_lab&quot;&gt;Gothard lab&lt;/a&gt; showed monkeys lots and lots of pictures of other monkeys.&lt;/p&gt;

&lt;p&gt;Monkeys, like humans, communicate their emotions and intentions through eye contact and distinct, stereotyped facial expressions. And just like humans, all monkeys have their own more or less wonderful personalities, which are to some degree revealed in the path that their eyes trace as they scan a social scene. In humans, direct eye contact is often regarded as a sign of confidence. The same is true in monkeys. The difference is that, while displaying confidence as a human might help you make a great impression at your job interview, displaying confidence as a monkey will get you your monkey ass handed to you (unless you are the alpha monkey, and I’m sure you would be). Almost all neuropsychiatric disorders have some effect on scanpath patterns, for example individuals with autism will spend less time looking at facial features.&lt;/p&gt;

&lt;p&gt;I developed ways to analyze these eye movements in order to understand how monkeys explored the faces of other monkeys. You can read about the study and see cool images of monkey faces in our article &lt;a href=&quot;http://journal.frontiersin.org/article/10.3389/neuro.08.050.2009/abstract&quot; target=&quot;_blank&quot;&gt;Individual differences in scanpaths correspond with serotonin transporter genotype and behavioral phenotype in rhesus monkeys (&lt;em&gt;Macaca mulatta&lt;/em&gt;)&lt;/a&gt; published in Frontiers in Behavioral Neuroscience.&lt;/p&gt;
</description>
        <pubDate>Sun, 25 Oct 2015 21:36:28 -0700</pubDate>
        <link>http://yourdomain.com/post/science/2015/10/25/how-do-monkeys-look.html</link>
        <guid isPermaLink="true">http://yourdomain.com/post/science/2015/10/25/how-do-monkeys-look.html</guid>
        
        
        <category>post</category>
        
        <category>science</category>
        
      </item>
    
      <item>
        <title>Mapping diversity in the Bay Area</title>
        <description>&lt;p&gt;In September 2014, some fascinating work from the &lt;a href=&quot;http://www.coopercenter.org/&quot;&gt;Weldon Cooper Center for Public Service&lt;/a&gt; made the rounds on the internet. The &lt;a href=&quot;http://demographics.coopercenter.org/DotMap/&quot;&gt;Racial Dot Map&lt;/a&gt; project accomplished the impressive feat of generating a map of the United States made of of dots. Not just any dots though. Each dot represents (roughly) the residence of a single US citizen, color coded by that person’s race. In addition to being lovely to look at, the map reveals some interesting patterns of how people of different races live together (or in some cases, live very far apart from each other).&lt;/p&gt;

&lt;p&gt;One thing I really love about the Bay Area is how diverse it is, and I became curious about what these data would show about my community.&lt;/p&gt;

&lt;p&gt;The Racial Dot Map makes it very obvious where certain races are concentrated, and to some extent, it points out areas where one or two races predominate. But I wanted to visually explore something slightly different; I wanted visualize diversity &lt;em&gt;itself&lt;/em&gt;. So instead of splotches of color that represent the presence of individual races, areas would be color coded by how homogeneous or heterogeneous they were. Consider an area containing 100 people. If that area contained 100 white people, it would have the same score as if it had 100 Hispanic people, the lowest possible diversity score. If it had 50 black people and 50 Asian people, it would attain a higher score, but the same as if it had with 50 white people and 50 Asian people. It would attain the highest possible diversity score when it had an even split of all the races recorded by the US census: 20 white people, 20 black people, 20 Asian people, 20 Hispanic people, and 20 “other race” people (an unfortunate category, I know). I analyzed the diversity of census tracts, which contain on average about 4000 people in this sample.&lt;/p&gt;

&lt;p&gt;Here are the results: dark regions represent places with high diversity. In broad strokes, the East Bay is most diverse (yeeeeee), followed by SF and North Bay. If you want to delve a bit deeper into the demographics underlying the diversity index in a census tract, you can click on the little dot in the center of the tract to pop up the breakdown. For example, in 2010 my neighborhood had 3716 people, 1256 White, 1163 Black, 750 Hispanic, and 313 Asian and 234 other.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/resources/bayarea-diversity-choropleth.html&quot; target=&quot;_blank&quot; style=&quot;float:right; font-size:80%&quot;&gt;view full screen&lt;/a&gt;&lt;/p&gt;

&lt;iframe src=&quot;/resources/bayarea-diversity-choropleth.html&quot; width=&quot;100%&quot; height=&quot;500px&quot; style=&quot;border:none&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Check out &lt;a href=&quot;/projects/data/geospatial/notebook/2015/10/26/bayarea-diversity-notebook.html&quot; target=&quot;_blank&quot;&gt;this Jupyter notebook&lt;/a&gt; if you want more detail about how I went about finding, analyzing, and plotting the data.&lt;/p&gt;

&lt;p&gt;I’d like to revisit this someday with a smarter measure of diversity. The index I came up with is blind to data outside of an individual census tract. Most people leave their census tracts every once in a while, so capturing larger-scale diversity would make this measure more realistic. For example, even the least diverse places in the Bay Area are probably just a 20 minute drive away from very diverse areas. A better metric would probably include something like, how large of a radius would you have to draw around your census tract to find as many people of non-predominant races as that tract has of its predominant race. For example, if my tract has 1000 Hispanic people, how big of an circle would I have to include around my tract to find 1000 non-Hispanic people? A measure like that, one that includes a concept of distance, would probably go much further towards capturing how diverse a place really feels.&lt;/p&gt;
</description>
        <pubDate>Tue, 20 Oct 2015 23:00:02 -0700</pubDate>
        <link>http://yourdomain.com/post/projects/data/geospatial/2015/10/20/bayarea-diversity.html</link>
        <guid isPermaLink="true">http://yourdomain.com/post/projects/data/geospatial/2015/10/20/bayarea-diversity.html</guid>
        
        
        <category>post</category>
        
        <category>projects</category>
        
        <category>data</category>
        
        <category>geospatial</category>
        
      </item>
    
      <item>
        <title>Cocktail Part A</title>
        <description>&lt;p&gt;In July 2015, friend and composer Richard Warp and I set out to make an installation for the &lt;a href=&quot;http://www.mainlymozart.org/mozart-and-the-mind/mozart-the-mind-the-prodigal-years/&quot;&gt;Mozart and the Mind&lt;/a&gt; conference. Our goal was to develop software that would algorithmically transform a conversation into a unique musical composition in real-time. For computer music, I had always turned to Max/MSP, but felt that it’s building-block style made it difficult to work in more conventional program flow, data analysis, and machine learning. That’s when I discovered the fantastic python module &lt;a href=&quot;http://ajaxsoundstudio.com/software/pyo/&quot;&gt;pyo&lt;/a&gt;, a library for real-time audio synthesis. I am planning on writing a blog post detailing my exploits, but for now, you can at least check out the results.&lt;/p&gt;

&lt;p&gt;Artist statement:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Conversation is the heart of the cocktail party. Through conversation we share our ideas and stories, and we mix our voices in an ever-changing sonic scene. Spoken language facilitates this mixture in it two ways: it is semantic: a vessel for thought, communication of abstract ideas, poetry, scientific concepts. As a semantic entity, words enable people to gather in the social plane, a shared and collaborative mental space. Speech is also sensory: rhythmic, tonal, and musical. Each person’s voice is uniquely theirs, immediately and reliably signifying the individual who produced the message.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;In an age that has adopted text as the de facto standard for communication, we often experience the message without the music, but voice sans message has its own allure. You may have encountered it, perhaps as a child in bed, hearing the murmurs of your parents in the next room. Or perhaps as a traveller in a foreign country, overhearing voices conversing in an unfamiliar language. When words are stripped of their literal meaning, their music elevates to the forefront of our attention.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;In this installation, we turn a spotlight onto this music and to the shared social space that it inhabits. Four “performers” equipped with portable EEG and voice recorders will engage in friendly cocktail party conversation. EEG and vocal output will stream to our base station, which will analyze the presence and flow of attention in this ad hoc social network. Utterances will be sampled, their linguistic meaning removed, and their musical features enhanced. An algorithm will layer and persist the samples according to the significance of their source in the social plane. By pointing out the musicality of language, we hope to convey the seed of prodigy in us all.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Here is one conversation, which we recorded during a demonstration for the course &lt;em&gt;EE 16B. Designing Information Devices and Systems II&lt;/em&gt; at UC Berkeley.&lt;/p&gt;

&lt;iframe width=&quot;60%&quot; height=&quot;150&quot; scrolling=&quot;no&quot; frameborder=&quot;no&quot; src=&quot;https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/229330702&amp;amp;auto_play=false&amp;amp;hide_related=false&amp;amp;show_comments=true&amp;amp;show_user=true&amp;amp;show_reposts=false&amp;amp;visual=true&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;This project is still under active development. We will present it in October at &lt;a href=&quot;http://www.spectrumnyc.com/&quot;&gt;Spectrum&lt;/a&gt;.&lt;/p&gt;
</description>
        <pubDate>Mon, 19 Oct 2015 18:22:15 -0700</pubDate>
        <link>http://yourdomain.com/post/projects/music/2015/10/19/cocktail-part-a.html</link>
        <guid isPermaLink="true">http://yourdomain.com/post/projects/music/2015/10/19/cocktail-part-a.html</guid>
        
        
        <category>post</category>
        
        <category>projects</category>
        
        <category>music</category>
        
      </item>
    
  </channel>
</rss>
